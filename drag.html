<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<style>
    .ratings_bars{width:407px;height:27px;position: absolute;left:200px;top: 8%;}
    .ratings_bars .bars_10{font-family:Georgia, "Times New Roman", Times, serif;font-size:18px;line-height:25px;float:left;color:#a0a0a0;}
    .ratings_bars #title0{width:25px;height:25px;text-align:center;border:1px solid #bfbebe;line-height:25px;font-family:Georgia, "Times New Roman", Times, serif;font-size:14px;float:left;color:#a0a0a0;margin-right:10px;background:#fff;}
    .ratings_bars .scale{width:299px;height:13px;float:left;margin:7px 10px auto 10px;position:relative;background:url(progress.png) 0 0 no-repeat;}
    .ratings_bars .scale div{width:0px;position:absolute;width:0;left:0;height:13px;bottom:0;background:url(progress.png) 0 -14px no-repeat;}
    .ratings_bars .scale span{width:10px;height:26px;position:absolute;left:-2px;top:-7px;cursor:pointer;background:url(bar.png) no-repeat;}
    </style>
<body>
    <div class="ratings_bars">	      	
  <span id="title0">0</span>
  <span class="bars_10">0</span>
  <div class="scale" id="bar0">
      <div></div>
      <span id="btn0"></span>
  </div>
  <span class="bars_10">10</span>			
</div>
<script>
    /**
 * 滑动杆相关
 */

 
 var drawSpeed = 100;
scale = function (btn, bar, title) {
	this.btn = document.getElementById(btn);
	this.bar = document.getElementById(bar);
	this.title = document.getElementById(title);
	this.step = this.bar.getElementsByTagName("DIV")[0];
	this.init();
	var rate = (drawSpeed-10.0)/(1000-10);
	var pos = Math.ceil(100*rate)
	var x = Math.ceil(this.bar.clientWidth*rate);
	this.ondrag(pos,x);
	this.btn.style.left = x + 'px';
	console.log(rate)
};
scale.prototype = {
		init: function () {
			var f = this, g = document, b = window, m = Math;
			f.btn.onmousedown = function (e) {
				documentflag = true;
				var x = (e || b.event).clientX;
			//	console.log("e"+e+"b"+b.event)
				var l = this.offsetLeft;
				var max = f.bar.offsetWidth - this.offsetWidth;
				g.onmousemove = function (e) {
					var thisX = (e || b.event).clientX;
					var to = m.min(max, m.max(-2, l + (thisX - x)));
					f.btn.style.left = to + 'px';
					f.ondrag(m.round(m.max(0, to / max) * 100), to);
					b.getSelection ? b.getSelection().removeAllRanges() : g.selection.empty();
				};
				g.onmouseup = new Function('this.onmousemove=null');
			};
		},
		ondrag: function (pos, x) {
			this.step.style.width = Math.max(0, x) + 'px';
			if(x<0){
				x=0;
			}
			var speed = 10+(1000-10)*(x*1.0/this.bar.clientWidth);
	//		drawSpeed = Math.ceil(speed);
			//console.log(drawSpeed);
			this.title.innerHTML = pos / 10 + '';
		}
	}
    new scale('btn0', 'bar0', 'title0');
    </script>	
</body>
</html>